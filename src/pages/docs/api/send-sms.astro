---
import DocsLayout from '../../../layouts/DocsLayout.astro'
---

<DocsLayout title="Send SMS">
  <h1>Send SMS</h1>

  <p class="lead text-xl text-neutral-600">
    Send an SMS message through the Ender API.
  </p>

  <div class="not-prose my-6 p-4 bg-neutral-100 rounded-lg">
    <p class="text-sm font-mono">
      <span class="text-green-600 font-semibold">POST</span>
      <span class="text-neutral-900 ml-2">/api/v1/sms</span>
    </p>
  </div>

  <h2>Request</h2>

  <h3>Headers</h3>

  <table>
    <thead>
      <tr>
        <th>Header</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Authorization</code></td>
        <td><code>Bearer YOUR_API_KEY</code></td>
      </tr>
      <tr>
        <td><code>Content-Type</code></td>
        <td><code>application/json</code></td>
      </tr>
    </tbody>
  </table>

  <h3>Body</h3>

  <table>
    <thead>
      <tr>
        <th>Field</th>
        <th>Type</th>
        <th>Required</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>to</code></td>
        <td>string</td>
        <td>Yes</td>
        <td>Phone number in E.164 format (e.g., <code>+1234567890</code>)</td>
      </tr>
      <tr>
        <td><code>message</code></td>
        <td>string</td>
        <td>Yes</td>
        <td>Message content (max 1600 characters)</td>
      </tr>
      <tr>
        <td><code>device_id</code></td>
        <td>string</td>
        <td>No</td>
        <td>Specific device to use. If omitted, auto-selected.</td>
      </tr>
      <tr>
        <td><code>webhook_url</code></td>
        <td>string</td>
        <td>No</td>
        <td>URL for delivery status webhook</td>
      </tr>
    </tbody>
  </table>

  <h3>Example</h3>

  <pre><code class="language-bash">curl -X POST https://your-server.com/api/v1/sms \
  -H "Authorization: Bearer sk_live_abc123" \
  -H "Content-Type: application/json" \
  -d '{"{"}
    "to": "+1234567890",
    "message": "Your verification code is 123456",
    "webhook_url": "https://your-app.com/webhooks/sms"
  {"}"}'</code></pre>

  <h2>Response</h2>

  <h3>Success (201 Created)</h3>

  <pre><code class="language-json">{"{"}
  "id": "msg_abc123def456",
  "status": "queued",
  "to": "+1234567890",
  "message": "Your verification code is 123456",
  "device_id": "dev_xyz789",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
{"}"}</code></pre>

  <h3>Message statuses</h3>

  <table>
    <thead>
      <tr>
        <th>Status</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>queued</code></td>
        <td>Message is queued for sending</td>
      </tr>
      <tr>
        <td><code>sending</code></td>
        <td>Message is being sent by the device</td>
      </tr>
      <tr>
        <td><code>sent</code></td>
        <td>Message was sent successfully</td>
      </tr>
      <tr>
        <td><code>delivered</code></td>
        <td>Message was delivered (if delivery reports enabled)</td>
      </tr>
      <tr>
        <td><code>failed</code></td>
        <td>Message failed to send</td>
      </tr>
    </tbody>
  </table>

  <h3>Errors</h3>

  <pre><code class="language-json">// 400 Bad Request - Invalid phone number
{"{"}
  "error": "invalid_phone_number",
  "message": "Phone number must be in E.164 format"
{"}"}

// 401 Unauthorized - Invalid API key
{"{"}
  "error": "unauthorized",
  "message": "Invalid or missing API key"
{"}"}

// 402 Payment Required - Quota exceeded
{"{"}
  "error": "quota_exceeded",
  "message": "Monthly message quota exceeded"
{"}"}

// 503 Service Unavailable - No devices available
{"{"}
  "error": "no_devices",
  "message": "No devices available to send messages"
{"}"}</code></pre>

  <h2>Code examples</h2>

  <h3>Python</h3>

  <pre><code class="language-python">import requests

response = requests.post(
    "https://your-server.com/api/v1/sms",
    headers={"{"}
        "Authorization": "Bearer sk_live_abc123",
        "Content-Type": "application/json"
    {"}"},
    json={"{"}
        "to": "+1234567890",
        "message": "Hello from Python!"
    {"}"}
)

print(response.json())</code></pre>

  <h3>JavaScript</h3>

  <pre><code class="language-javascript">const response = await fetch("https://your-server.com/api/v1/sms", {"{"}
  method: "POST",
  headers: {"{"}
    "Authorization": "Bearer sk_live_abc123",
    "Content-Type": "application/json"
  {"}"},
  body: JSON.stringify({"{"}
    to: "+1234567890",
    message: "Hello from JavaScript!"
  {"}"})
{"}"});

const data = await response.json();
console.log(data);</code></pre>

  <h2>Related</h2>

  <ul>
    <li><a href="/docs/api/status">Message Status</a> - Check delivery status</li>
    <li><a href="/docs/api/webhooks">Webhooks</a> - Receive delivery notifications</li>
    <li><a href="/docs/api/auth">Authentication</a> - API key management</li>
  </ul>
</DocsLayout>
