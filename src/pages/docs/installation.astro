---
import DocsLayout from '../../layouts/DocsLayout.astro'
---

<DocsLayout title="Installation">
  <h1>Installation</h1>

  <p class="lead text-xl text-neutral-600">
    Deploy Ender on your own server for production use.
  </p>

  <h2>Requirements</h2>

  <ul>
    <li>Linux server (Ubuntu 22.04+ recommended)</li>
    <li>Docker and Docker Compose v2</li>
    <li>At least 1GB RAM, 10GB disk</li>
    <li>Domain name with SSL certificate</li>
  </ul>

  <h2>Docker Compose (Recommended)</h2>

  <h3>1. Clone the repository</h3>

  <pre><code class="language-bash">git clone https://github.com/ender-sms/ender.git
cd ender</code></pre>

  <h3>2. Configure environment</h3>

  <pre><code class="language-bash">cp .env.example .env</code></pre>

  <p>Edit <code>.env</code> and set:</p>

  <pre><code class="language-bash"># Required
SECRET_KEY=your-secret-key-here
POSTGRES_PASSWORD=your-db-password
DOMAIN=sms.yourdomain.com

# Optional
SMTP_HOST=smtp.example.com
SMTP_USER=...
SMTP_PASSWORD=...</code></pre>

  <h3>3. Start the services</h3>

  <pre><code class="language-bash">docker compose -f docker-compose.prod.yml up -d</code></pre>

  <h3>4. Run migrations</h3>

  <pre><code class="language-bash">docker compose exec backend alembic upgrade head</code></pre>

  <h3>5. Create admin user</h3>

  <pre><code class="language-bash">docker compose exec backend python -m app.cli create-user \
  --email admin@yourdomain.com \
  --password your-secure-password \
  --superuser</code></pre>

  <h2>Reverse Proxy Setup</h2>

  <p>See <a href="/docs/guides/nginx">Nginx Reverse Proxy</a> for SSL termination and proxy configuration.</p>

  <h2>Environment Variables</h2>

  <table>
    <thead>
      <tr>
        <th>Variable</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>SECRET_KEY</code></td>
        <td>JWT signing key (required)</td>
        <td>-</td>
      </tr>
      <tr>
        <td><code>DATABASE_URL</code></td>
        <td>PostgreSQL connection string</td>
        <td>postgres://...</td>
      </tr>
      <tr>
        <td><code>DOMAIN</code></td>
        <td>Your domain name</td>
        <td>localhost</td>
      </tr>
      <tr>
        <td><code>CORS_ORIGINS</code></td>
        <td>Allowed CORS origins</td>
        <td>*</td>
      </tr>
    </tbody>
  </table>

  <h2>Updates</h2>

  <p>To update to the latest version:</p>

  <pre><code class="language-bash">git pull
docker compose -f docker-compose.prod.yml pull
docker compose -f docker-compose.prod.yml up -d
docker compose exec backend alembic upgrade head</code></pre>

  <h2>Next steps</h2>

  <ul>
    <li><a href="/docs/android-app">Android App</a> - Set up your first device</li>
    <li><a href="/docs/guides/nginx">Nginx Guide</a> - Configure SSL</li>
    <li><a href="/docs/guides/docker">Docker Guide</a> - Advanced configuration</li>
  </ul>
</DocsLayout>
