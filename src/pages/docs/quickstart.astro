---
import DocsLayout from "../../layouts/DocsLayout.astro";
import CodeBlock from "../../components/CodeBlock.astro";
---

<DocsLayout title="Quick Start">
    <h1>Quick Start</h1>

    <p class="lead text-xl text-neutral-600">
        Get Ender up and running in 5 minutes.
    </p>

    <h2>Choose your path</h2>

    <div class="not-prose my-6 grid gap-4 md:grid-cols-2">
        <div class="card card-featured">
            <h3 class="card-title">Ender Cloud (Recommended)</h3>
            <p class="card-description">
                Start sending SMS in under 2 minutes. No server needed.
            </p>
            <ul class="card-list">
                <li>✓ Free plan included</li>
                <li>✓ Paid plans from $0.99/mo</li>
            </ul>
            <button onclick="openWaitlistModal()" class="btn btn-primary">
                Sign up free
                <svg
                    class="btn-icon"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                </svg>
            </button>
        </div>
        <div class="card card-muted">
            <h3 class="card-title">Self-hosted</h3>
            <p class="card-description">
                Deploy on your own server with Docker.
            </p>
            <p class="text-sm text-neutral-500">Continue reading below ↓</p>
        </div>
    </div>

    <h2>Self-hosted setup</h2>

    <h3>Prerequisites</h3>

    <ul>
        <li>Docker and Docker Compose installed</li>
        <li>An Android phone with a SIM card (or USB modem)</li>
    </ul>

    <h3>1. Create a docker-compose.yml</h3>

    <CodeBlock
        lang="yaml"
        filename="docker-compose.yml"
        code={`services:
  app:
    image: ghcr.io/jimscope/ender:latest
    environment:
      - ENVIRONMENT=production
      - FIRST_SUPERUSER=admin@yourdomain.com
      - FIRST_SUPERUSER_PASSWORD=change-this-password
      - APP_URL=http://localhost:8090
      - FRONTEND_URL=http://localhost:8090
    ports:
      - "8090:8090"
    volumes:
      - ender_data:/app/pb_data

volumes:
  ender_data:`}
    />

    <h3>2. Start the service</h3>

    <CodeBlock lang="bash" code="docker compose up -d" />

    <p>This starts Ender on port <code>8090</code>, serving both the API and the web dashboard as a single service. Data is stored in an embedded SQLite database.</p>

    <h3>3. Log in to the dashboard</h3>

    <p>
        Open the dashboard at <code>http://localhost:8090</code> and log in with the superuser credentials you set in the environment variables. You can also access the PocketBase admin panel at <code>http://localhost:8090/_/</code>.
    </p>

    <h3>4. Connect a device</h3>

    <p>Install the Ender Android app on your phone:</p>

    <ol>
        <li>
            Download the APK from <a
                href="https://github.com/JimScope/ender-android/releases"
                >GitHub Releases</a>
        </li>
        <li>
            Open the app and enter your server URL: <code
                >http://YOUR_SERVER_IP:8090</code>
        </li>
        <li>Log in with your credentials</li>
        <li>Grant SMS permissions when prompted</li>
    </ol>

    <p>Your phone is now registered as a device and ready to send messages.</p>

    <h3>5. Create an API key</h3>

    <p>Back in the dashboard:</p>

    <ol>
        <li>Go to <strong>Settings → API Keys</strong></li>
        <li>Click <strong>Create API Key</strong></li>
        <li>Copy the key (it won't be shown again)</li>
    </ol>

    <h3>6. Send your first message</h3>

    <p>Use your API key to send an SMS:</p>

    <CodeBlock
        lang="bash"
        code={`curl -X POST http://localhost:8090/api/sms/send \\
  -H "X-API-Key: YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "recipients": ["+1234567890"],
    "body": "Hello from Ender!"
  }'`}
    />

    <p>You'll get a response like:</p>

    <CodeBlock
        lang="json"
        code={`{
  "message_ids": ["a1b2c3d4e5f6g7h"],
  "recipients_count": 1,
  "status": "accepted"
}`}
    />

    <h3>7. Check message status</h3>

    <p>View your message in the dashboard, or query it via the PocketBase collections API:</p>

    <CodeBlock
        lang="bash"
        code={`curl http://localhost:8090/api/collections/sms_messages/records/MESSAGE_ID \\
  -H "Authorization: Bearer YOUR_JWT_TOKEN"`}
    />

    <h2>Next steps</h2>

    <ul>
        <li>
            <a href="/docs/installation">Installation</a> - Production deployment
            guide
        </li>
        <li>
            <a href="/docs/api/webhooks">Webhooks</a> - Get delivery notifications
        </li>
        <li>
            <a href="/docs/guides/nginx">Nginx Guide</a> - Set up SSL and reverse
            proxy
        </li>
    </ul>
</DocsLayout>
